<tool id="matisse-ng-siting" name="Natural Gas Siting Analysis" version="0.1.0" profile="22.01">
    <description>Python script for running MATISSE's natural gas siting analysis on data from CKAN.</description>
    <requirements>
        <container type="docker" shell="/bin/bash">savannah.ornl.gov/armada/matisse/ng_siting:0.1.0</container>
    </requirements>
    <command><![CDATA[
        mkdir .ckan &&
        python -m matisse_ng_siting
            $depsch_file
            $clustdist_file
            $ng_file
            $usstructures_file
            $ng_tea_single_file
            $ng_tea_cluster_file
            $ng_tea_cluster_sweep
            > >(tee -a $output) 2> >(tee -a $output >&2) &&
        zip -r ng_points_sweep_results.zip ng_points_sweep_results && mv ng_points_sweep_results.zip $points_sweep &&
        zip -r nglcoe_21gw.zip nglcoe_21gw && mv nglcoe_21gw.zip $nglcoe
    ]]></command>
    <inputs>
        <param name="depsch_file" type="data" optional="false" label="Time-dependent Assumptions" />
        <param name="clustdist_file" type="data" optional="false" label="Cluster Distribution" />
        <param name="ng_file" type="data" optional="false" label="Natural Gas Sites" />
        <param name="usstructures_file" type="data" optional="false" label="US Structures" />
        <param name="ng_tea_single_file" type="data" optional="false" label="Techno-economic Analysis (Single)" />
        <param name="ng_tea_cluster_file" type="data" optional="false" label="Techno-economic Analysis (Cluster)" />
        <param name="ng_tea_cluster_sweep" type="data" optional="false" label="Techno-economic Analysis (Sweep)" />
    </inputs>
    <outputs>
        <data format="txt" name="output" label="Console output"></data>
        <data format="zip" name="points_sweep" label="NG Points Sweep Results"></data>
        <data format="zip" name="nglcoe" label="NGLCOE 21GW"></data>
    </outputs>
    <help><![CDATA[
        **MATISSE Natural Gas Siting**
    ]]></help>
</tool>