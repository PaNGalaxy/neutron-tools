<tool id="neutrons_mcu_sample_simulator" name="Sample Simulator"  profile="22.05" version="0.1.0">
  <description></description>
<requirements>
    <container type="docker">code.ornl.gov:4567/ndip/tool-sources/mcu/sample-simulator/release/sample-simulator-mcvine:latest</container>
</requirements>
    <inputs>
        <param name="instrument" type="text" optional="false" label="Instrument Name"/>
        <param name="ARCS_json" type="data" format="text" optional="false" label="ARCS json config"/>
        <param name="ARCS_mcpl" type="data" optional="false" label="ARCS vsource mcpl"/>
        <param name="sample_assembly" type="data" format="gz,zip" optional="false" label="Sample assembly to be used in simulation"/>
    </inputs>
    <command detect_errors="exit_code"><![CDATA[
        ln -s /opt/mcvine mcvine &&
        cd mcvine/test &&
        python test_mcvine.py &&
        cd ../ARCS_sim &&
        ls .. &&
        unzip $sample_assembly -d sampleassembly &&
        mcvine neutronstorage from_mcpl $ARCS_mcpl --out m2sout/neutrons &&
        python beam2bpp.py $ARCS_json &&
        make sim.nxs
    ]]></command>
    <outputs>
		  <data format="h5" name="sim.nxs" label="Simulated events"/>
    </outputs>
    <help><![CDATA[
A tool to run McVine simulations of a Sample
]]></help>
</tool>