<tool id="imaginex_image_converter" name="IMAGINE-X image converter"  profile="22.05" version="0.1.0-dev" python_template_version="3.5">
  <requirements>
    <container type="docker">code.ornl.gov:4567/dnp-computational-project/data-reduction-ndip-tools/jpeg-file-converter/production/main:0.0.4</container>
  </requirements>
    <command detect_errors="exit_code"><![CDATA[

		mkdir in ;
		mkdir out ; 

		#for $input in $inputs
		    mv $input in/$input.element_identifier ;
		#end for

		python /convert.py --input in --output out --type $type ;

    ]]></command>
    <inputs>
    
		<param format="dat" multiple="true" name="inputs" type="data" label="Anger camera input files" />
		<param name="type" type="select" optional="false" value="TIFF" label="Output Format" help="Image file format for output files.">
			<option value="PNG">PNG</option>
			<option value="TIFF">TIFF</option>
		</param>

    </inputs>
    <outputs>
	<collection name="output_pngs" type="list" label="Output PNG Images">
	    <discover_datasets pattern="__designation__" format="png" directory="out" />
	    <filter>options[type] == 'PNG'</filter>
	</collection>
	<collection name="output_tiffs" type="list" label="Output TIFF Images">
	    <discover_datasets pattern="__designation__" format="tiff" directory="out" />
	    <filter>options[type] == 'TIFF'</filter>
	</collection>
    </outputs>
    <help><![CDATA[
        Converts input files into .pngs for use with peak finding tool.
    ]]></help>
</tool>
