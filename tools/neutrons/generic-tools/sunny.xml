<tool id="sunny-prototype" name="Sunny" version="0.1.0" profile="22.01">
    <description>Sunny Tool</description>
    <requirements>
        <container type="docker" shell="/bin/bash">savannah.ornl.gov/ndip/tool-sources/generic/sunny/prototypes:b8ee594e3e8e95f9189dd1d97be2cdb9eb181a3d</container>
    </requirements>
     <command><![CDATA[
        <%
        with open($output, 'r') as f:
            output_folder = f.read()
        # Now use $file_content in your template
        %>
        mkdir $output_folder &&
        pixi run --as-is --manifest-path /app app --nproc $nproc --data-dir \$(pwd)/$output_folder --nsamps $nsampl > >(tee -a $output) 2> >(tee -a $output >&2)
    ]]></command>
    <inputs>
        <param name="output" type="data" label="Output Folder" value="1"/>
        <param name="nproc" type="integer" label="Number of Processes" value="1"/>
        <param name="nsampl" type="integer" label="Number of Samples" value="1"/>
    </inputs>
    <outputs>
        <data format="txt" name="output" label="Console output"></data>
        <collection type="list" name="output_collection" label="$output_folder - $nsampl sample(s)">
            <discover_datasets pattern="__designation_and_ext__" directory="$output_folder"/>
        </collection>
    </outputs>
    <help><![CDATA[
        **Sunny**
        
        This is a Galaxy tool for Sunny.
        
        For more information, see the repository: https://code.ornl.gov/ndip/tool-sources/spectroscopy/sunny
    ]]></help>
</tool>