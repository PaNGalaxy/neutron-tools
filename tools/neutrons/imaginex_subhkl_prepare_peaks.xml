<tool id="imaginex_subhkl_prepare_peaks" name="IMAGINE-X HKL Prepare Peaks"  profile="22.05" version="0.1.0-dev" python_template_version="3.5">
  <requirements>
    <container type="docker">ghcr.io/zjmorgan/subhkl:main</container>
  </requirements>
    <command detect_errors="exit_code"><![CDATA[
		mkdir out ; 

		python -m subhkl.io.parser preparer $input out/out.csv flat $height $distance --image-orientation $orientation --scale-x $scale_x --scale-y $scale_y --nx $nx --ny $ny 
    ]]></command>
    <inputs>
    
		<param format="txt" name="input" type="data" label="Peak data file" />
		<param name="shape" type="select" optional="false" value="flat" label="Detector Shape">
			<option value="flat">flat</option>
			<option value="curved">curved</option>
		</param>
	    <param name="height" type="float" value="1.0" label="Detector Height"/> 
	    <param name="distance" type="float" value="1.0" label="Detector Distance"/> 
	    <param name="orientation" type="float" value="0.0" label="Image Orientation"/> 
	    <param name="scale_x" type="float" value="1.0" label="Scale X"/> 
	    <param name="scale_y" type="float" value="1.0" label="Scale Y"/> 
	    <param name="nx" type="integer" value="1" label="nx"/> 
	    <param name="ny" type="integer" value="1" label="ny"/> 
		
    </inputs>
    <outputs>
		<data format="hd5" name="out/output.hd5" />
    </outputs>
    <help><![CDATA[
        Calculates peak indices.
    ]]></help>
</tool>
